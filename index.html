
<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <title>Ù…Ø­Ù„Ù„ Ø§Ù„Ø£Ø³ÙˆØ§Ù‚ Ø§Ù„Ù…Ø§Ù„ÙŠØ© - AI</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/marked/9.1.2/marked.min.js"></script>

  <link rel="manifest" href="manifest.json">
  <script>
    if ('serviceWorker' in navigator) {
      navigator.serviceWorker.register('sw.js')
        .then(() => console.log("Service Worker Registered"));
    }
  </script>
</head>

<body class="bg-gray-100 min-h-screen p-6 font-sans">

  <h1 class="text-3xl font-bold text-center text-purple-600 mb-6">ğŸ“ˆ Ù…Ø­Ù„Ù„ Ø§Ù„Ø£Ø³ÙˆØ§Ù‚ Ø§Ù„Ù…Ø§Ù„ÙŠØ©</h1>
<div class="mb-4">
  <input id="apiKey" type="password" placeholder="Ø£Ø¯Ø®Ù„ Ù…ÙØªØ§Ø­ OpenAI Ù‡Ù†Ø§" class="w-full border p-3 rounded" />
</div>


  <div class="max-w-3xl mx-auto space-y-4">
    <select id="analysisType" class="w-full border rounded p-3">
      <option value="stock">ØªØ­Ù„ÙŠÙ„ Ø³Ù‡Ù…</option>
      <option value="crypto">ØªØ­Ù„ÙŠÙ„ Ø¹Ù…Ù„Ø© Ø±Ù‚Ù…ÙŠØ©</option>
      <option value="market">ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ø³ÙˆÙ‚ Ø§Ù„Ø¹Ø§Ù…</option>
      <option value="portfolio">ØªØ­Ù„ÙŠÙ„ Ù…Ø­ÙØ¸Ø© Ø§Ø³ØªØ«Ù…Ø§Ø±ÙŠØ©</option>
      <option value="technical">ØªØ­Ù„ÙŠÙ„ ÙÙ†ÙŠ</option>
      <option value="fundamental">ØªØ­Ù„ÙŠÙ„ Ø£Ø³Ø§Ø³ÙŠ</option>
    </select>

    <textarea id="analysisQuery" rows="4" class="w-full border rounded p-3" placeholder="Ù…Ø«Ø§Ù„: ØªØ­Ù„ÙŠÙ„ Ø³Ù‡Ù… Ø¢Ø¨Ù„ Ø£Ùˆ Ø¨ÙŠØªÙƒÙˆÙŠÙ†..."></textarea>

    <button onclick="performAnalysis()" id="analyzeBtn" class="w-full bg-purple-600 text-white py-3 rounded">ğŸ” Ø§Ø¨Ø¯Ø£ Ø§Ù„ØªØ­Ù„ÙŠÙ„</button>

    <div id="loadingIndicator" class="text-center text-gray-500 hidden">â³ Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù„ÙŠÙ„...</div>

    <div id="analysisResults" class="border rounded p-4 bg-white hidden">
      <div id="analysisContent" class="prose max-w-none text-right"></div>
    </div>
  </div>

  <script>
    async function performAnalysis() {
      const analysisType = document.getElementById('analysisType').value;
      const query = document.getElementById('analysisQuery').value.trim();
      const analyzeBtn = document.getElementById('analyzeBtn');
      const resultsDiv = document.getElementById('analysisResults');
      const loadingIndicator = document.getElementById('loadingIndicator');
      const analysisContent = document.getElementById('analysisContent');

      if (!query) {
        alert('ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ ØªÙØ§ØµÙŠÙ„ Ø§Ù„ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ù…Ø·Ù„ÙˆØ¨');
        return;
      }

      resultsDiv.classList.remove('hidden');
      loadingIndicator.classList.remove('hidden');
      analysisContent.innerHTML = '';
      analyzeBtn.disabled = true;
      analyzeBtn.innerHTML = 'â³ Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù„ÙŠÙ„...';

      const analysisTypeLabels = {
        'stock': 'ØªØ­Ù„ÙŠÙ„ Ø³Ù‡Ù…',
        'crypto': 'ØªØ­Ù„ÙŠÙ„ Ø¹Ù…Ù„Ø© Ø±Ù‚Ù…ÙŠØ©',
        'market': 'ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ø³ÙˆÙ‚ Ø§Ù„Ø¹Ø§Ù…',
        'portfolio': 'ØªØ­Ù„ÙŠÙ„ Ù…Ø­ÙØ¸Ø© Ø§Ø³ØªØ«Ù…Ø§Ø±ÙŠØ©',
        'technical': 'ØªØ­Ù„ÙŠÙ„ ÙÙ†ÙŠ',
        'fundamental': 'ØªØ­Ù„ÙŠÙ„ Ø£Ø³Ø§Ø³ÙŠ'
      };

      const prompt = `
Ø£Ù†Øª Ù…Ø­Ù„Ù„ Ù…Ø§Ù„ÙŠ Ø®Ø¨ÙŠØ±. Ù‚Ù… Ø¨ØªØ­Ù„ÙŠÙ„ Ù…ÙØµÙ„ Ù„Ù…Ø§ ÙŠÙ„ÙŠ:
Ù†ÙˆØ¹ Ø§Ù„ØªØ­Ù„ÙŠÙ„: ${analysisTypeLabels[analysisType]}
Ø§Ù„ØªÙØ§ØµÙŠÙ„: ${query}
Ù‚Ø¯Ù‘Ù… Ø§Ù„ØªØ­Ù„ÙŠÙ„ Ø¨Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©ØŒ ÙˆØ¶Ù…Ù† Ø§Ù„Ø¹Ù†Ø§ØµØ±:
1- Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ø­Ø§Ù„ÙŠ
2- Ø§Ù„Ø¹ÙˆØ§Ù…Ù„ Ø§Ù„Ù…Ø¤Ø«Ø±Ø©
3- Ø§Ù„ØªÙˆÙ‚Ø¹Ø§Øª
4- Ø§Ù„ÙØ±Øµ ÙˆØ§Ù„Ù…Ø®Ø§Ø·Ø±
5- Ø§Ù„ØªÙˆØµÙŠØ§Øª`;

      try {
        const response = await fetch("https://api.openai.com/v1/chat/completions", {
          method: "POST",
          headers: {
            "Authorization": "Bearer " + document.getElementById('apiKey').value,
            "Content-Type": "application/json"
          },
          body: JSON.stringify({
            model: "gpt-4",
            messages: [{ role: "user", content: prompt }],
            temperature: 0.7
          })
        });

        const data = await response.json();
        const result = data.choices?.[0]?.message?.content || 'Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø±Ø¯';
        loadingIndicator.classList.add('hidden');
        analysisContent.innerHTML = marked.parse(result);
      } catch (error) {
        loadingIndicator.classList.add('hidden');
        analysisContent.innerHTML = `<div class="text-red-600">Ø­Ø¯Ø« Ø®Ø·Ø£: ${error.message}</div>`;
      }

      analyzeBtn.disabled = false;
      analyzeBtn.innerHTML = 'ğŸ” Ø§Ø¨Ø¯Ø£ Ø§Ù„ØªØ­Ù„ÙŠÙ„';
    }
  </script>
</body>
</html>
